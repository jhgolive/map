<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¸Œë¼ìš°ì € ì •ë³´ ë³´ê¸°</title>
  <style>
    :root { --bg:#0b0f14; --card:#121822; --muted:#9fb0c3; --text:#e6eef7; --accent:#7cc4ff; }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif; background: var(--bg); color: var(--text); }
    header { padding: 20px 16px; border-bottom: 1px solid #223042; position: sticky; top: 0; background: linear-gradient(180deg, rgba(11,15,20,.98), rgba(11,15,20,.92)); backdrop-filter: blur(6px); z-index: 5; }
    h1 { margin: 0; font-size: 20px; letter-spacing: .2px; }
    main { padding: 20px 16px 100px; max-width: 1100px; margin: 0 auto; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 14px; }
    .card { background: var(--card); border: 1px solid #223042; border-radius: 16px; padding: 14px; box-shadow: 0 6px 18px rgba(0,0,0,.25); }
    .card h2 { margin: 0 0 10px; font-size: 16px; color: var(--accent); font-weight: 700; }
    .kv { display: grid; grid-template-columns: 160px 1fr; gap: 8px 12px; align-items: start; }
    .kv div.key { color: var(--muted); white-space: nowrap; }
    .kv div.val { word-break: break-word; }
    .row + .row { margin-top: 6px; }
    .toolbar { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
    button { background: #1a2330; color: var(--text); border: 1px solid #2c3b51; border-radius: 12px; padding: 8px 12px; cursor: pointer; font-weight: 600; }
    button:hover { border-color: #3d5474; }
    code.inline { background: #0f1520; border: 1px solid #223042; padding: 1px 6px; border-radius: 10px; }
    details { border: 1px dashed #2c3b51; border-radius: 12px; padding: 8px 10px; }
    summary { cursor: pointer; color: var(--accent); font-weight: 700; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    footer { position: fixed; left: 0; right: 0; bottom: 0; background: #0b0f14; border-top: 1px solid #223042; padding: 10px 16px; display: flex; gap: 8px; align-items: center; }
    .hint { color: var(--muted); font-size: 12px; }
    .ok { color: #6be675; }
    .warn { color: #ffd65c; }
    .err { color: #ff7d7d; }
    a { color: var(--accent); }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ§­ ë¸Œë¼ìš°ì € ì •ë³´ ë³´ê¸°</h1>
    <div class="hint">ì´ í˜ì´ì§€ëŠ” í˜„ì¬ ë¸Œë¼ìš°ì €/ë””ë°”ì´ìŠ¤ ì •ë³´ë¥¼ ìˆ˜ì§‘í•´ ë¡œì»¬ì—ì„œë§Œ í‘œì‹œí•©ë‹ˆë‹¤. ì„œë²„ë¡œ ì „ì†¡í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
  </header>
  <main>
    <div class="grid">
      <section class="card">
        <h2>ìš”ì•½</h2>
        <div class="kv" id="summary"></div>
        <div class="toolbar">
          <button id="btn-refresh">ìƒˆë¡œê³ ì¹¨</button>
          <button id="btn-copy">ë³µì‚¬</button>
          <button id="btn-download">JSON ì €ì¥</button>
          <button id="btn-permissions">ê¶Œí•œ ìƒíƒœ ê°±ì‹ </button>
        </div>
      </section>

      <section class="card">
        <h2>ë¸Œë¼ìš°ì € & í”Œë«í¼</h2>
        <div class="kv" id="browser"></div>
      </section>

      <section class="card">
        <h2>í™”ë©´ & ì…ë ¥</h2>
        <div class="kv" id="screen"></div>
      </section>

      <section class="card">
        <h2>ë„¤íŠ¸ì›Œí¬</h2>
        <div class="kv" id="network"></div>
      </section>

      <section class="card">
        <h2>ì €ì¥ì†Œ & ë°°í„°ë¦¬</h2>
        <div class="kv" id="storage"></div>
      </section>

      <section class="card">
        <h2>ê¶Œí•œ</h2>
        <div class="kv" id="permissions"></div>
      </section>

      <section class="card">
        <h2>ë¯¸ë””ì–´ & ì¥ì¹˜</h2>
        <div class="kv" id="media"></div>
      </section>

      <section class="card">
        <h2>ì½”ë± ì§€ì›</h2>
        <div class="kv" id="codecs"></div>
      </section>

      <section class="card">
        <h2>GPU (WebGL)</h2>
        <div class="kv" id="gpu"></div>
      </section>

      <section class="card">
        <h2>ì›ì‹œ UA ë¬¸ìì—´</h2>
        <details>
          <summary>í¼ì¹˜ê¸°</summary>
          <pre class="mono" id="ua-raw"></pre>
        </details>
      </section>
    </div>
  </main>

  <footer>
    <div class="hint">íŒ: í™”ë©´ íšŒì „/ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ìë™ ê°±ì‹ ë©ë‹ˆë‹¤. ì¼ë¶€ ì •ë³´ëŠ” ë¸Œë¼ìš°ì € ì •ì±…ì— ë”°ë¼ ì œê³µë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
  </footer>

  <script>
    const el = (id) => document.getElementById(id);

    function setKV(container, entries) {
      const frag = document.createDocumentFragment();
      for (const [k, v] of entries) {
        const key = document.createElement('div');
        key.className = 'key';
        key.textContent = k;
        const val = document.createElement('div');
        val.className = 'val';
        val.textContent = (v === undefined || v === null || v === '') ? '-' : String(v);
        frag.appendChild(key); frag.appendChild(val);
      }
      container.replaceChildren(frag);
    }

    function boolIcon(b) { return b === true ? 'âœ…' : b === false ? 'âŒ' : 'â”'; }

    function tryOr(fn, fallback='-') { try { return fn(); } catch { return fallback; } }

    function getUA() {
      const nav = navigator;
      const d = {};
      d.userAgent = nav.userAgent || '-';
      d.platform = nav.platform || '-';
      d.language = nav.language || '-';
      d.languages = (nav.languages || []).join(', ');
      d.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      d.hardwareConcurrency = nav.hardwareConcurrency ?? '-';
      d.deviceMemory = nav.deviceMemory ? `${nav.deviceMemory} GB` : '-';
      d.cookieEnabled = boolIcon(nav.cookieEnabled);
      d.javaEnabled = boolIcon(tryOr(() => nav.javaEnabled()));
      // UA-CH
      d.uaBrands = (nav.userAgentData && nav.userAgentData.brands) ? nav.userAgentData.brands.map(b => `${b.brand} ${b.version}`).join(', ') : '-';
      d.mobile = (nav.userAgentData && typeof nav.userAgentData.mobile === 'boolean') ? boolIcon(nav.userAgentData.mobile) : '-';
      d.platformUA = nav.userAgentData?.platform || '-';
      return d;
    }

    function getBrowserBlock() {
      const ua = getUA();
      const data = [
        ['ë¸Œë¼ìš°ì € (UA-CH)', ua.uaBrands],
        ['ëª¨ë°”ì¼ ì—¬ë¶€', ua.mobile],
        ['í”Œë«í¼', ua.platformUA || ua.platform],
        ['ì–¸ì–´', ua.language],
        ['ì–¸ì–´(ëª©ë¡)', ua.languages],
        ['ì‹œê°„ëŒ€', ua.timezone],
        ['ë…¼ë¦¬ ì½”ì–´ ìˆ˜', ua.hardwareConcurrency],
        ['ì¶”ì • RAM', ua.deviceMemory],
        ['ì¿ í‚¤ ì‚¬ìš©', ua.cookieEnabled],
        ['Java ì‚¬ìš©', ua.javaEnabled],
      ];
      return { data, uaRaw: ua.userAgent };
    }

    function getScreenBlock() {
      const dpr = window.devicePixelRatio || 1;
      const touch = 'ontouchstart' in window || (navigator.maxTouchPoints > 0);
      const screenSize = `${screen.width} x ${screen.height}`;
      const avail = `${screen.availWidth} x ${screen.availHeight}`;
      const inner = `${innerWidth} x ${innerHeight}`;
      const colorDepth = `${screen.colorDepth}-bit`;
      const orientation = screen.orientation ? `${screen.orientation.type} (${screen.orientation.angle}Â°)` : '-';
      return [
        ['DPR (ë°°ìœ¨)', dpr],
        ['ìŠ¤í¬ë¦°', screenSize],
        ['ì‚¬ìš©ê°€ëŠ¥ ì˜ì—­', avail],
        ['ë·°í¬íŠ¸', inner],
        ['ì»¬ëŸ¬ ê¹Šì´', colorDepth],
        ['ì˜¤ë¦¬ì—”í…Œì´ì…˜', orientation],
        ['í„°ì¹˜ ì§€ì›', boolIcon(touch)],
        ['Pointer ì´ë²¤íŠ¸', boolIcon('onpointerdown' in window)],
        ['ì‹œê°ì  ë·°í¬íŠ¸', tryOr(() => `${visualViewport.width.toFixed(0)} x ${visualViewport.height.toFixed(0)}`)],
      ];
    }

    function getNetworkBlock() {
      const c = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      const entries = [
        ['ì˜¨ë¼ì¸', boolIcon(navigator.onLine)],
        ['RTT(ms)', c?.rtt ?? '-'],
        ['Downlink(Mbps)', c?.downlink ?? '-'],
        ['íš¨ìœ¨ì  ìœ í˜•', c?.effectiveType ?? '-'],
        ['ì €ë°ì´í„° ëª¨ë“œ', typeof c?.saveData === 'boolean' ? boolIcon(c.saveData) : '-'],
      ];
      return entries;
    }

    async function getStorageBatteryBlock() {
      const entries = [];
      // Storage estimate
      if (navigator.storage && navigator.storage.estimate) {
        try {
          const est = await navigator.storage.estimate();
          const q = est.quota ? (est.quota / (1024**3)).toFixed(2) + ' GB' : '-';
          const u = est.usage ? (est.usage / (1024**3)).toFixed(2) + ' GB' : '-';
          entries.push(['Storage í• ë‹¹ëŸ‰', q]);
          entries.push(['Storage ì‚¬ìš©ëŸ‰', u]);
        } catch {}
      }
      // Battery
      if (navigator.getBattery) {
        try {
          const b = await navigator.getBattery();
          entries.push(['ë°°í„°ë¦¬ ì”ëŸ‰', Math.round(b.level * 100) + '%']);
          entries.push(['ì¶©ì „ ì¤‘', boolIcon(b.charging)]);
          entries.push(['ë‚¨ì€ ì‹œê°„(ë°©ì „)', (b.dischargingTime && b.dischargingTime !== Infinity) ? (b.dischargingTime/60).toFixed(0) + ' ë¶„' : '-']);
        } catch {}
      }
      // Storage persistence
      if (navigator.storage && navigator.storage.persisted) {
        try {
          const persisted = await navigator.storage.persisted();
          entries.push(['ì˜êµ¬ ì €ì¥(persisted)', boolIcon(persisted)]);
        } catch {}
      }
      return entries;
    }

    async function getPermissionsBlock() {
      const targets = ['geolocation', 'notifications', 'camera', 'microphone', 'clipboard-read', 'clipboard-write', 'midi', 'persistent-storage'];
      const out = [];
      if (!navigator.permissions?.query) return [['ì§€ì› ì—¬ë¶€', 'Permissions API ë¯¸ì§€ì›']];
      for (const name of targets) {
        try {
          const res = await navigator.permissions.query({ name });
          out.push([name, res.state]);
        } catch {
          out.push([name, 'ì¿¼ë¦¬ ë¶ˆê°€']);
        }
      }
      return out;
    }

    async function getMediaBlock() {
      const out = [];
      if (navigator.mediaDevices?.enumerateDevices) {
        try {
          const list = await navigator.mediaDevices.enumerateDevices();
          const counts = list.reduce((acc, d) => { acc[d.kind] = (acc[d.kind]||0)+1; return acc; }, {});
          out.push(['ì˜¤ë””ì˜¤ ì…ë ¥', counts['audioinput']||0]);
          out.push(['ì˜¤ë””ì˜¤ ì¶œë ¥', counts['audiooutput']||0]);
          out.push(['ë¹„ë””ì˜¤ ì…ë ¥', counts['videoinput']||0]);
        } catch { out.push(['ë¯¸ë””ì–´ ì¥ì¹˜', 'ì—´ëŒ ì‹¤íŒ¨']); }
      } else {
        out.push(['ë¯¸ë””ì–´ ì¥ì¹˜', 'API ë¯¸ì§€ì›']);
      }
      out.push(['WebRTC( RTCPeerConnection )', boolIcon('RTCPeerConnection' in window)]);
      out.push(['ìŠ¤í¬ë¦° ìº¡ì²˜(getDisplayMedia)', boolIcon(!!navigator.mediaDevices?.getDisplayMedia)]);
      return out;
    }

    function getCodecBlock() {
      const v = document.createElement('video');
      const a = document.createElement('audio');
      const test = (el, type) => el && typeof el.canPlayType === 'function' ? (el.canPlayType(type) || '-') : '-';
      return [
        ['H.264 (MP4)', test(v, 'video/mp4; codecs="avc1.42E01E"')],
        ['H.265/HEVC', test(v, 'video/mp4; codecs="hev1"')],
        ['VP8 (WebM)', test(v, 'video/webm; codecs="vp8"')],
        ['VP9 (WebM)', test(v, 'video/webm; codecs="vp9"')],
        ['AV1', test(v, 'video/mp4; codecs="av01.0.05M.08"')],
        ['Opus (WebM)', test(a, 'audio/webm; codecs="opus"')],
        ['AAC (MP4)', test(a, 'audio/mp4; codecs="mp4a.40.2"')],
        ['MP3 (MPEG)', test(a, 'audio/mpeg;')],
      ];
    }

    function getGPUBlock() {
      const canvas = document.createElement('canvas');
      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      if (!gl) return [['WebGL', 'ë¯¸ì§€ì›']];
      const dbg = gl.getExtension('WEBGL_debug_renderer_info');
      const vendor = dbg ? gl.getParameter(dbg.UNMASKED_VENDOR_WEBGL) : gl.getParameter(gl.VENDOR);
      const renderer = dbg ? gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL) : gl.getParameter(gl.RENDERER);
      const shading = gl.getParameter(gl.SHADING_LANGUAGE_VERSION);
      const ver = gl.getParameter(gl.VERSION);
      return [
        ['WebGL ë²„ì „', ver],
        ['GLSL', shading],
        ['GPU ë²¤ë”', vendor],
        ['GPU ë Œë”ëŸ¬', renderer],
        ['Max í…ìŠ¤ì²˜ í¬ê¸°', gl.getParameter(gl.MAX_TEXTURE_SIZE)],
        ['Max ì •ì  í…ìŠ¤ì²˜', gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],
        ['Max í…ìŠ¤ì²˜ ìœ ë‹›', gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)],
      ];
    }

    function getSummaryBlock(all) {
      const now = new Date();
      return [
        ['í˜ì´ì§€ ë¡œë“œ', now.toLocaleString()],
        ['ë¸Œë¼ìš°ì €', all.browser.find(([k]) => k.includes('ë¸Œë¼ìš°ì €')).at(1)],
        ['í”Œë«í¼', all.browser.find(([k]) => k === 'í”Œë«í¼').at(1)],
        ['ì˜¨ë¼ì¸', all.network.find(([k]) => k === 'ì˜¨ë¼ì¸').at(1)],
        ['ë·°í¬íŠ¸', all.screen.find(([k]) => k === 'ë·°í¬íŠ¸').at(1)],
        ['DPR', all.screen.find(([k]) => k.includes('DPR')).at(1)],
        ['ì‹œê°„ëŒ€', all.browser.find(([k]) => k === 'ì‹œê°„ëŒ€').at(1)],
      ];
    }

    async function gatherAll() {
      const browser = getBrowserBlock();
      const screen = getScreenBlock();
      const network = getNetworkBlock();
      const storage = await getStorageBatteryBlock();
      const permissions = await getPermissionsBlock();
      const media = await getMediaBlock();
      const codecs = getCodecBlock();
      const gpu = getGPUBlock();
      const uaRaw = browser.uaRaw;
      return { browser: browser.data, screen, network, storage, permissions, media, codecs, gpu, uaRaw };
    }

    async function render() {
      const all = await gatherAll();
      setKV(el('browser'), all.browser);
      setKV(el('screen'), all.screen);
      setKV(el('network'), all.network);
      setKV(el('storage'), all.storage);
      setKV(el('permissions'), all.permissions);
      setKV(el('media'), all.media);
      setKV(el('codecs'), all.codecs);
      setKV(el('gpu'), all.gpu);
      setKV(el('summary'), getSummaryBlock(all));
      el('ua-raw').textContent = all.uaRaw;
      window.__browserInfo = all; // export
    }

    function downloadJSON() {
      const blob = new Blob([JSON.stringify(window.__browserInfo || {}, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = `browser-info-${Date.now()}.json`; a.click();
      URL.revokeObjectURL(url);
    }

    async function copyAll() {
      const txt = JSON.stringify(window.__browserInfo || {}, null, 2);
      try {
        await navigator.clipboard.writeText(txt);
        alert('ë³µì‚¬ ì™„ë£Œ');
      } catch {
        // fallback
        const ta = document.createElement('textarea');
        ta.value = txt; document.body.appendChild(ta); ta.select();
        document.execCommand('copy'); ta.remove();
        alert('ë³µì‚¬ ì™„ë£Œ (í´ë°±)');
      }
    }

    // Events
    window.addEventListener('resize', () => {
      // ë·°í¬íŠ¸/ì‹œê°ì ë·°í¬íŠ¸ ë³€ë™ ë°˜ì˜
      setKV(el('screen'), getScreenBlock());
      setKV(el('summary'), getSummaryBlock({
        browser: getBrowserBlock().data,
        screen: getScreenBlock(),
        network: getNetworkBlock()
      }));
    });

    el('btn-refresh').addEventListener('click', render);
    el('btn-download').addEventListener('click', downloadJSON);
    el('btn-copy').addEventListener('click', copyAll);
    el('btn-permissions').addEventListener('click', async () => setKV(el('permissions'), await getPermissionsBlock()));

    // ì´ˆê¸° ë Œë”
    render();
  </script>
</body>
</html>
